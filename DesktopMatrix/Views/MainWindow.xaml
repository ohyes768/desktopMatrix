<Window x:Class="DesktopMatrix.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DesktopMatrix.Views"
        xmlns:viewModels="clr-namespace:DesktopMatrix.ViewModels"
        xmlns:models="clr-namespace:DesktopMatrix.Models"
        xmlns:utils="clr-namespace:DesktopMatrix.Utils"
        mc:Ignorable="d"
        Title="DesktopMatrix" Height="500" Width="700"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="False">

    <Window.Resources>
        <!-- æ¯›çŽ»ç’ƒæ•ˆæžœ -->
        <SolidColorBrush x:Key="BackgroundBrush" Color="#F0FFFFFF"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#E0E0E0"/>

        <!-- æ ·å¼å®šä¹‰ -->
        <Style x:Key="QuadrantTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="3"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="#333333"/>
        </Style>

        <Style x:Key="QuadrantPanelStyle" TargetType="Border">
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#D0D0D0"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Margin" Value="3"/>
            <Setter Property="Background" Value="#FAFFFFFF"/>
        </Style>

        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#E81123"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="0,8,0,8">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- è±¡é™ç±»åž‹åˆ°é¢œè‰²çš„è½¬æ¢å™¨ -->
        <BooleanToVisibilityConverter x:Key="BoolToVisConverter"/>
    </Window.Resources>
  
    <Border Background="{StaticResource BackgroundBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="10"
            Margin="5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- é¡¶éƒ¨æ ‡é¢˜æ  - å¯æ‹–æ‹½ -->
            <Grid Grid.Row="0" Background="#F8F8F8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- åº”ç”¨æ ‡é¢˜å’Œå¿«é€Ÿæ·»åŠ  -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10,5">
                    <TextBlock Text="ðŸ“‹" FontSize="16" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBlock Text="DesktopMatrix" Foreground="#333333"
                               FontSize="14" FontWeight="Bold" VerticalAlignment="Center"/>

                    <!-- å¿«é€Ÿæ·»åŠ ä»»åŠ¡ -->
                    <TextBox Width="150" Margin="15,0,5,0" Padding="5,2"
                             Text="{Binding NewTaskTitle, UpdateSourceTrigger=PropertyChanged}"
                             VerticalContentAlignment="Center"
                             FontSize="12">
                        <TextBox.Resources>
                            <Style TargetType="TextBox">
                                <Setter Property="Background" Value="#F0F0F0"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TextBox">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="3">
                                                <ScrollViewer x:Name="PART_ContentHost"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TextBox.Resources>
                    </TextBox>
                    <ComboBox Width="80" Margin="2,0" Padding="3,1" FontSize="10"
                              SelectedValue="{Binding SelectedQuadrant}"
                              SelectedValuePath="Tag">
                        <ComboBoxItem Content="Q1" Tag="Q1"/>
                        <ComboBoxItem Content="Q2" Tag="Q2"/>
                        <ComboBoxItem Content="Q3" Tag="Q3"/>
                        <ComboBoxItem Content="Q4" Tag="Q4"/>
                    </ComboBox>
                    <Button Content="+" Padding="8,1" Margin="2,0"
                            Command="{Binding AddTaskCommand}"
                            Background="#4CAF50" Foreground="White"
                            BorderThickness="0" FontSize="14" FontWeight="Bold"/>
                </StackPanel>

                <!-- å…³é—­æŒ‰é’® -->
                <Button Grid.Column="1" Content="Ã—" Style="{StaticResource CloseButtonStyle}"/>
            </Grid>
              <!-- ä¸»å†…å®¹åŒº - å››è±¡é™çŸ©é˜µ -->
            <Grid Grid.Row="1" Margin="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- ç¬¬ä¸€è±¡é™ï¼šé‡è¦ä¸”ç´§æ€¥ -->
                <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource QuadrantPanelStyle}"
                        BorderBrush="#D32F2F" Background="#FFEBEE">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="ðŸ”¥ é‡è¦ç´§æ€¥" Style="{StaticResource QuadrantTitleStyle}"
                                   Foreground="#D32F2F"/>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl ItemsSource="{Binding Q1Tasks}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <local:TaskCard Margin="2,1"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- ç¬¬äºŒè±¡é™ï¼šé‡è¦ä¸ç´§æ€¥ -->
                <Border Grid.Column="1" Grid.Row="0" Style="{StaticResource QuadrantPanelStyle}"
                        BorderBrush="#1976D2" Background="#E3F2FD">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="ðŸ’¡ é‡è¦ä¸ç´§æ€¥" Style="{StaticResource QuadrantTitleStyle}"
                                   Foreground="#1976D2"/>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl ItemsSource="{Binding Q2Tasks}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <local:TaskCard Margin="2,1"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- ç¬¬ä¸‰è±¡é™ï¼šç´§æ€¥ä¸é‡è¦ -->
                <Border Grid.Column="0" Grid.Row="1" Style="{StaticResource QuadrantPanelStyle}"
                        BorderBrush="#FF9800" Background="#FFF3E0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="âš¡ ç´§æ€¥ä¸é‡è¦" Style="{StaticResource QuadrantTitleStyle}"
                                   Foreground="#FF9800"/>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl ItemsSource="{Binding Q3Tasks}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <local:TaskCard Margin="2,1"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- ç¬¬å››è±¡é™ï¼šä¸é‡è¦ä¸ç´§æ€¥ -->
                <Border Grid.Column="1" Grid.Row="1" Style="{StaticResource QuadrantPanelStyle}"
                        BorderBrush="#4CAF50" Background="#E8F5E9">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="ðŸŒ± ä¸é‡è¦ä¸ç´§æ€¥" Style="{StaticResource QuadrantTitleStyle}"
                                   Foreground="#4CAF50"/>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <ItemsControl ItemsSource="{Binding Q4Tasks}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <local:TaskCard Margin="2,1"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>